{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// strict mode\n'use strict'\n\nexport function fetchImages(searchCriteria) {\n \n    const searchParams = new URLSearchParams({\n        key: \"43557588-360f3c0dbe3221038cf66573a\",\n        q: searchCriteria,\n        // page: pageNum,\n        image_type: \"photo\",\n        orientation: \"horizontal\", \n        safesearch: true \n    });\n    \n    const url = `https://pixabay.com/api/?${searchParams}`;\n\n    return fetch(url);\n };","// Import the SimpleLightbox library\nimport SimpleLightbox from \"simplelightbox\";\n// Additional import of SimpleLightbox style\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// strict mode\n'use strict'\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {                   // the simpleLightbox pattern\n        captions: true,                                            // show captions if availabled or not\n        captionSelector: 'img',                                    // set the element where the caption is\n        captionsData: 'alt',                                       // get the caption from given attribute\n        captionPosition: 'bottom',                                        \n        captionDelay: 250,                                         // delay before the caption shows (in ms)\n        captionType: 'attr'                                        // how to get the caption.                                                                  // You can choose between attr, data or text\n    });\n\nexport function renderImagesByPages(dataHit) { \n    \n    let gallery = document.querySelector(\"ul.gallery-ul\");\n    // Clear gallery content to avoid mixing query results\n    gallery.innerHTML = \"\";\n\n    const markup = dataHit\n            .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n                `    <li class=\"gallery-item\">\n                        <div class=\"gallery\">\n                            <a class=\"gallery-link\" href=\"${largeImageURL}\" >\n                                <img class=\"gallery-image\" src=\"${webformatURL}\" data-source=\"${largeImageURL}\" alt=\"${tags}\" />\n                            </a>\n                        </div>    \n                        <div class=\"gallery-props\">\n                            <div class=\"gallery-props-item\">\n                                Likes\n                                    <div class=\"gallery-props-number\">${likes}</div>\n                            </div>\n                            <div class=\"gallery-props-item\">\n                                Views\n                                    <div class=\"gallery-props-number\">${views}</div>\n                            </div>\n                            <div class=\"gallery-props-item\">\n                                Comments\n                                    <div class=\"gallery-props-number\">${comments}</div>\n                            </div>\n                            <div class=\"gallery-props-item\">\n                                Downloads\n                                    <div class=\"gallery-props-number\">${downloads}</div>\n                            </div>\n                        </div>\n                    </li>`\n            )\n            .join(\"\");\n    // Display the gallery    \n    gallery.insertAdjacentHTML(\"afterbegin\", markup);\n    \n    lightbox.refresh();\n\n}","//  Main import of iziToast\nimport iziToast from \"izitoast\";\n// Additional import of iziToast style\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImagesByPages } from \"./js/render-functions.js\";\n\n// strict mode\n'use strict'\n\nconst searchFld = document.querySelector(\".search-block-field\");\nconst searchBtn = document.querySelector(\".search-block-button\"); \nconst loader = document.querySelector(\".loader\");\nlet gallery = document.querySelector(\"ul.gallery-ul\");\n\nlet searchCriteria = '';\n\nsearchFld.addEventListener(\"input\", () => { \n    searchCriteria = searchFld.value;\n});\n\nsearchBtn.addEventListener(\"click\", () => { \n    // Display loader\n    loader.style.display = 'block';\n    // Search field cannot be empty\n    if (searchCriteria.trim()) {\n        // Clear the gallery\n        gallery.innerHTML = \"\";\n        fetchImages(searchCriteria)\n            .then(response => { \n                // Clear Search field           \n                searchFld.value = '';\n                // Return JSON object\n                return response.json();\n            })\n            .then(data => {\n                // Check if the total number of items is 0\n                if (data.total === 0) {\n                    iziToast.error({\n                        title: 'Error',\n                        message: 'Sorry, there are no images matching your search query. Please try again!'\n                    });\n                    // Hide loader\n                    loader.style.display = 'none';\n                    searchCriteria = '';\n                    return;\n                } else { \n                    // Return data.hits;\n                    renderImagesByPages(data.hits.flat());\n                    // Hide loader\n                    loader.style.display = 'none';\n                    searchCriteria = '';                   \n                };\n            })          \n            .catch(error => console.error(error));\n    } else { \n        iziToast.error({\n            title: 'Error',\n            message: 'Search field cannot be empty'\n        });\n        // Clear gallery content to avoid mixing query results\n        gallery.innerHTML = \"\";\n        // Hide loader\n        loader.style.display = 'none';\n        return;\n    }\n});\n\n\n\n"],"names":["fetchImages","searchCriteria","url","lightbox","SimpleLightbox","renderImagesByPages","dataHit","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFld","searchBtn","loader","response","data","iziToast","error"],"mappings":"6vBAGO,SAASA,EAAYC,EAAgB,CAWxC,MAAMC,EAAM,4BATS,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGD,EAEH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,CAEmD,GAEpD,OAAO,MAAMC,CAAG,CACpB,CCTA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC1C,SAAU,GACV,gBAAiB,MACjB,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,YAAa,MACrB,CAAK,EAEE,SAASC,EAAoBC,EAAS,CAEzC,IAAIC,EAAU,SAAS,cAAc,eAAe,EAEpDA,EAAQ,UAAY,GAEpB,MAAMC,EAASF,EACN,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC1E;AAAA;AAAA,4DAE4CL,CAAa;AAAA,kEACPD,CAAY,kBAAkBC,CAAa,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wEAMnDC,CAAK;AAAA;AAAA;AAAA;AAAA,wEAILC,CAAK;AAAA;AAAA;AAAA;AAAA,wEAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,wEAIRC,CAAS;AAAA;AAAA;AAAA,0BAIpE,EACA,KAAK,EAAE,EAEhBR,EAAQ,mBAAmB,aAAcC,CAAM,EAE/CL,EAAS,QAAO,CAEpB,CC9CA,MAAMa,EAAY,SAAS,cAAc,qBAAqB,EACxDC,EAAY,SAAS,cAAc,sBAAsB,EACzDC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIX,EAAU,SAAS,cAAc,eAAe,EAEhDN,EAAiB,GAErBe,EAAU,iBAAiB,QAAS,IAAM,CACtCf,EAAiBe,EAAU,KAC/B,CAAC,EAEDC,EAAU,iBAAiB,QAAS,IAAM,CAItC,GAFAC,EAAO,MAAM,QAAU,QAEnBjB,EAAe,OAEfM,EAAQ,UAAY,GACpBP,EAAYC,CAAc,EACrB,KAAKkB,IAEFH,EAAU,MAAQ,GAEXG,EAAS,OACnB,EACA,KAAKC,GAAQ,CAEV,GAAIA,EAAK,QAAU,EAAG,CAClBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EACjC,CAAqB,EAEDH,EAAO,MAAM,QAAU,OACvBjB,EAAiB,GACjB,MACpB,MAEoBI,EAAoBe,EAAK,KAAK,KAAM,CAAA,EAEpCF,EAAO,MAAM,QAAU,OACvBjB,EAAiB,GAExB,EACA,MAAMqB,GAAS,QAAQ,MAAMA,CAAK,CAAC,MACrC,CACHD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8BACrB,CAAS,EAEDd,EAAQ,UAAY,GAEpBW,EAAO,MAAM,QAAU,OACvB,MACH,CACL,CAAC"}